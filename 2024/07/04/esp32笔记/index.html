<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>esp32 | FY的博客</title><meta name="author" content="二马山石"><meta name="copyright" content="二马山石"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. 外部中断之">
<meta property="og:type" content="article">
<meta property="og:title" content="esp32">
<meta property="og:url" content="https://fylhg.github.io/github.fy/2024/07/04/esp32%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="FY的博客">
<meta property="og:description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. 外部中断之">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://micropython.86x.net/en/latet/_images/esp32.jpg">
<meta property="article:published_time" content="2024-07-04T05:46:02.527Z">
<meta property="article:modified_time" content="2024-07-05T03:48:09.548Z">
<meta property="article:author" content="二马山石">
<meta property="article:tag" content="esp32">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://micropython.86x.net/en/latet/_images/esp32.jpg"><link rel="shortcut icon" href="/github.fy/img/favicon.png"><link rel="canonical" href="https://fylhg.github.io/github.fy/2024/07/04/esp32%E7%AC%94%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/github.fy/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/github.fy/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'esp32',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-05 11:48:09'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/github.fy/img/1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/github.fy/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/github.fy/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/github.fy/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/github.fy/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/github.fy/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/github.fy/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/github.fy/link/"><i class="fa-fw fas fa-link"></i><span> 连接</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('http://micropython.86x.net/en/latet/_images/esp32.jpg')"><nav id="nav"><span id="blog-info"><a href="/github.fy/" title="FY的博客"><img class="site-icon" src="/github.fy/img/1.jpg"/><span class="site-name">FY的博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/github.fy/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/github.fy/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/github.fy/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/github.fy/link/"><i class="fa-fw fas fa-link"></i><span> 连接</span></a></div><div class="menus_item"><a class="site-page" href="/github.fy/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">esp32</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-04T05:46:02.527Z" title="发表于 2024-07-04 13:46:02">2024-07-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-05T03:48:09.548Z" title="更新于 2024-07-05 11:48:09">2024-07-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/github.fy/categories/esp32/">esp32</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="esp32"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h1 id="外部中断"><a href="#外部中断" class="headerlink" title="外部中断"></a>外部中断</h1><p>之前我们学习了 ESP32 的按键控制，当时通过查询 GPIO 输入电平来判断按键状态，这种方法占用 CPU 资源，效率不高。本节课我们学习外部中断，通过外部中断实现按键控制 LED。</p>
<h2 id="实验原理"><a href="#实验原理" class="headerlink" title="实验原理"></a>实验原理</h2><p>在单片机中，中断是指当 CPU 在正常处理主程序时，突然发生了另一件事件 A（中断发生）需要 CPU 去处理，这时 CPU 就会暂停处理主程序（中断响应），转而去处理事件 A（中断服务）。当事件 A 处理完以后，再回到主程序原来中断的地方继续执行主程序（中断返回）。这一整个过程称为中断。</p>
<p>例如，当你正在洗衣时，突然手机响了（中断发生），你暂时中断洗衣的工作，转去接电话（中断响应和中断服务），待你接完后，再回来继续洗衣（中断返回），这一过程就是中断。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202304252149940.png"></p>
<p>当中断过程 A 中，发生了另一个中断级别更高的中断事件 B,则 CPU 又会中断当前的 A 转而去处理 B，完毕后再回到 A 的断点继续处理。这称为中断的嵌套。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202304252222680.png"></p>
<p>中断的嵌套涉及到中断的优先级问题，优先级高的中断就可以在打断优先级低的中断执行。</p>
<p>注意</p>
<p>ESP32 无法使用 MicroPython 设置中断的优先级。</p>
<p>中断可以根据中断源分为 <code>硬件中断</code> 和 <code>软件中断</code>：</p>
<ol>
<li><code>硬件中断</code>：也被称为外部中断，硬件中断响应外部硬件事件而发生。例如，当检测到触摸时会发生触摸中断，而当 GPIO 引脚的状态发生变化时会发生 GPIO 中断。GPIO 中断和触摸中断属于这一类；</li>
<li><code>软件中断</code>：当触发软件事件（例如定时器溢出）时，会发生这种类型的中断。定时器中断是软件中断的一个例子。</li>
</ol>
<p>前面我们在做按键控制实验时，虽然能实现 IO 口输入功能，但代码是一直在检测 IO 输入口的变化，因此效率不高，特别是在一些特定的场合，比如某个按键，可能 1 天才按下一次去执行相关功能，这样我们就浪费大量时间来实时检测按键的情况。</p>
<p>为了解决这样的问题，我们引入外部中断概念，顾名思义，就是当按键被按下（产生中断）时，才去执行相关功能。这大大节省了 CPU 的资源，因此中断在实际项目中应用非常普遍。</p>
<p>ESP32 的外部中断有上升沿、下降沿、低电平、高电平触发模式。上升沿和下降沿触发如下：</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202303122145643.png"></p>
<p>若将按键对应 IO 配置为下降沿触发，当按键按下后即触发中断，然后在中断回调函数内执行对应的功能。</p>
<h2 id="硬件电路设计"><a href="#硬件电路设计" class="headerlink" title="硬件电路设计"></a>硬件电路设计</h2><p>使用按键电路实现开关灯的效果。</p>
<p>物料清单（BOM 表）：</p>
<table>
<thead>
<tr>
<th>材料名称</th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td>直插式 LED</td>
<td>1</td>
</tr>
<tr>
<td>1kΩ 电阻</td>
<td>1</td>
</tr>
<tr>
<td>杜邦线(跳线)</td>
<td>若干</td>
</tr>
<tr>
<td>面包板</td>
<td>1</td>
</tr>
</tbody></table>
<p>将材料按照下图相连:</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202303121853387.png"></p>
<h2 id="软件程序设计"><a href="#软件程序设计" class="headerlink" title="软件程序设计"></a>软件程序设计</h2><p>外部中断也是通过 Pin 模块来配置的，使用方法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin</span><br><span class="line"></span><br><span class="line">button = Pin(<span class="number">14</span>, Pin.IN, Pin.PULL_DOWN)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置中断模式</span></span><br><span class="line">button.irq(handler, trigger)</span><br></pre></td></tr></table></figure>

<p>其中 <code>button.irq(handler, trigger)</code> 是配置中断模式，参数意义：</p>
<ul>
<li><code>handler</code>: 中断执行的回调函数；</li>
<li><code>trigger</code>: 触发中断的方式，共 4 种，分别是 Pin.IRQ_FALLING（下降沿触发）、Pin.IRQ_RISING（上升沿触发）、Pin.IRQ_LOW_LEVEL（低电平触发）、Pin.IRQ_HIGH_LEVEL（高电平触发）。</li>
</ul>
<p>因此，我们的代码需要这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin</span><br><span class="line"></span><br><span class="line">button = Pin(<span class="number">14</span>, Pin.IN, Pin.PULL_DOWN)</span><br><span class="line"></span><br><span class="line">led = Pin(<span class="number">2</span>, Pin.OUT)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 button 的外部中断函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">button_irq</span>(<span class="params">button</span>):</span><br><span class="line">    time.sleep_ms(<span class="number">80</span>)</span><br><span class="line">    <span class="keyword">if</span> button.value() == <span class="number">1</span>:</span><br><span class="line">        led.value(<span class="keyword">not</span> led.value())</span><br><span class="line"></span><br><span class="line">button.irq(button_irq, Pin.IRQ_RISING)</span><br></pre></td></tr></table></figure>

<h1 id="PS2双轴按键摇杆"><a href="#PS2双轴按键摇杆" class="headerlink" title="PS2双轴按键摇杆"></a>PS2双轴按键摇杆</h1><p>之前我们已经学习了如何使用 PWM 和 ADC，这节课我们来学习如何使用 PS2 双轴摇杆来控制舵机。</p>
<h2 id="实验原理-1"><a href="#实验原理-1" class="headerlink" title="实验原理"></a>实验原理</h2><p>摇杆一般在航模、电玩、遥控车、云台等设备上应用广泛，很多带有屏幕的设备也经常使用摇杆作为菜单选择的输入控制。</p>
<p>双轴按键摇杆主要由两个电位器和一个按键开关组成，两个电位器随着摇杆扭转角度分别输出 X、Y 轴上对应的电压值，在 Z 轴方向上按下摇杆可触发轻触按键。在配套机械结构的作用下，无外力扭动的摇杆初始状态下，两个电位器都处在量程的中间位置。它就是两个电位器和按键的组合体。电位器是可变电阻器，与中学时学的滑动变阻器类似。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305111546558.png"></p>
<p>PS2 摇杆的五个端口分别为 VCC，X，Button，Y，GND。</p>
<p>摆动 PS2 游戏摇杆时，随着接触刷改变接触位置，可变电阻器（电位器）的引脚处的输出电压即发生变化。X，Y 轴为模拟输入信号而 Z 轴是数字输入信号，因此，X 和 Y 端口连接到 ADC 引脚，而 Z 端口连接到数字端口。所以我们一共需要使用 ESP32 的三个 GPIO 引脚，其中两个模拟信号输入引脚和一个数字信号输入引脚。</p>
<p>PS2 游戏摇杆正常状态（不受力状态）检测电压常态时为 1.65V 附近，最大值 3.3V，最小值 0V，用 ESP32 自带 ADC 模数转换模块的两个通道分别检测电压值的变化就可以知道摇杆指向的位置了。</p>
<h2 id="硬件电路设计-1"><a href="#硬件电路设计-1" class="headerlink" title="硬件电路设计"></a>硬件电路设计</h2><p>物料清单（BOM 表）：</p>
<table>
<thead>
<tr>
<th>材料名称</th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td>PS2 摇杆模块</td>
<td>1</td>
</tr>
<tr>
<td>舵机</td>
<td>1</td>
</tr>
<tr>
<td>杜邦线(跳线)</td>
<td>若干</td>
</tr>
</tbody></table>
<p>PS2 模块的 +5V 引脚接 ESP32 的 3V3 引脚，一般情况下 ESP32 的 ADC 电压输入范围为 0-3.3V，高于 3.3V 可能会烧坏 ADC。摇杆模块的 GND 接 GND；模块的 SW 接 D4，VRX 接 D15，VRY 接 D2。</p>
<p>舵机接开发板另一侧的 5V 引脚、GND 和 D13。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305111537684.png"></p>
<h2 id="软件程序设计-1"><a href="#软件程序设计-1" class="headerlink" title="软件程序设计"></a>软件程序设计</h2><p>因此，在 shell 环境中打印出当前值的程序可以这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, ADC</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义摇杆的引脚</span></span><br><span class="line">ps2_x = ADC(Pin(<span class="number">15</span>), atten=ADC.ATTN_11DB)</span><br><span class="line">ps2_y = ADC(Pin(<span class="number">2</span>), atten=ADC.ATTN_11DB)</span><br><span class="line">ps2_button = Pin(<span class="number">4</span>, Pin.IN)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;x:<span class="subst">&#123;ps2_x.read()&#125;</span> y:<span class="subst">&#123;ps2_y.read()&#125;</span> z:<span class="subst">&#123;ps2_button.value()&#125;</span>&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>

<p>接下来，我们就可以使用 PS2 摇杆模块控制舵机了，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, ADC, PWM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义摇杆引脚</span></span><br><span class="line">ps2_x = ADC(Pin(<span class="number">15</span>), atten=ADC.ATTN_11DB)</span><br><span class="line">ps2_y = ADC(Pin(<span class="number">2</span>), atten=ADC.ATTN_11DB)</span><br><span class="line">ps2_button = Pin(<span class="number">4</span>, Pin.IN)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义舵机控制引脚</span></span><br><span class="line">my_servo = PWM(Pin(<span class="number">13</span>), freq=<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 读取 X 轴模拟信号</span></span><br><span class="line">    x_value = ps2_x.read()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 在一个周期内(20ms), 0.5ms -&gt; 0°, 2.4ms -&gt; 180°</span></span><br><span class="line">    <span class="comment"># 0.5/20 * 1024</span></span><br><span class="line">    servo_angle = x_value/<span class="number">4095</span> *(<span class="number">2.4</span>-<span class="number">0.5</span>)/<span class="number">20</span> *<span class="number">1024</span> + <span class="number">0.5</span>/<span class="number">20</span> * <span class="number">1024</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># duty 方法控制舵机转动，0-1023, 0°-&gt; 0.5/20 * 1024;</span></span><br><span class="line">    <span class="comment"># 180° -&gt; 2.4/20*1024;</span></span><br><span class="line">    my_servo.duty(<span class="built_in">int</span>(servo_angle))</span><br><span class="line">    </span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>

<h1 id="PWM驱动呼吸灯"><a href="#PWM驱动呼吸灯" class="headerlink" title="PWM驱动呼吸灯"></a>PWM驱动呼吸灯</h1><p>之前我们使用的 LED 做过流水灯的实验，这节课，我们学习制作呼吸灯，通过 LED 灯的亮度变化来验证 PWM 不同电压的输出。呼吸灯是指灯光在单片机的控制之下完成由亮到暗的逐渐变化，感觉好像是人在呼吸。</p>
<h2 id="实验原理-2"><a href="#实验原理-2" class="headerlink" title="实验原理"></a>实验原理</h2><p>脉冲宽度调制（PWM），是英文 <code>Pulse Width Modulation</code> 的缩写，简称脉宽调制，是利用微处理器的数字输出来对模拟电路进行控制的一种非常有效的技术，广泛应用在测量、通信到功率控制与变换的许多领域中。</p>
<p>PWM 通过调节输出不同频率（频率是指 1 秒钟内信号从高电平到低电平再回到高电平的次数（一个周期））、占空比（一个周期内高电平出现时间占总时间比例）的方波。以实现固定频率或平均电压输出。频率固定，改变占空比可改变输出电压，如下所示：</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202303122325277.png"></p>
<h2 id="硬件电路设计-2"><a href="#硬件电路设计-2" class="headerlink" title="硬件电路设计"></a>硬件电路设计</h2><p>物料清单（BOM 表）：</p>
<table>
<thead>
<tr>
<th>材料名称</th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td>直插式 LED</td>
<td>1</td>
</tr>
<tr>
<td>1kΩ 电阻</td>
<td>1</td>
</tr>
<tr>
<td>杜邦线(跳线)</td>
<td>若干</td>
</tr>
<tr>
<td>面包板</td>
<td>1</td>
</tr>
</tbody></table>
<p>LED 的正极接开发板的 D12 引脚，并串联一个电阻，负极接 GND，如下图：</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202303022158660.png"></p>
<p>注意</p>
<p>一定要接电阻，不然会由于电流过大，烧坏 LED。</p>
<h2 id="软件程序设计-2"><a href="#软件程序设计-2" class="headerlink" title="软件程序设计"></a>软件程序设计</h2><p>PWM 可以通过 ESP32 所有 GPIO 引脚输出。所有通道都有 1 个特定的频率，从 1 到 40M 之间（单位是 Hz）。占空比的值为 0 至 1023 之间。</p>
<p>PWM 在 machine 的 PWM 模块中，我们也是只需要了解其构造对象函数和使用方法：</p>
<p>构造函数 <code>machine.PWM(dest, freq, duty, duty_u16, duty_ns)</code>，使用以下参数构造并返回一个新的 PWM 对象：</p>
<ul>
<li><code>dest</code> 是输出 PWM 的实体，通常是 machine.Pin 对象；</li>
<li><code>freq</code> 应该是一个整数，用于设置 PWM 周期的<strong>频率</strong>（以 Hz 为单位）；</li>
<li><code>duty</code> 占空比，范围是 0 - 1023；</li>
<li><code>duty_u16</code> 占空比，范围是 0 - 65535，2 的 16 次方；</li>
<li><code>duty_ns</code> 以纳秒为单位设置脉冲宽度，范围是 0 - 50000。</li>
</ul>
<p>使用方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, PWM</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 从1个引脚中创建PWM对象</span></span><br><span class="line">led = PWM(Pin(<span class="number">12</span>), freq=<span class="number">20000</span>, duty=<span class="number">512</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前频率</span></span><br><span class="line">led.freq()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置频率</span></span><br><span class="line">led.freq(<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前占空比</span></span><br><span class="line">led.duty()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置占空比</span></span><br><span class="line">led.duty(<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 duty_u16 方法</span></span><br><span class="line">led.duty_u16(<span class="number">12345</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 duty_ns 方法</span></span><br><span class="line">led.duty_ns()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭引脚的 PWM</span></span><br><span class="line">led.deinit() </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>因此，我们的代码可以这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, PWM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 LED 控制对象</span></span><br><span class="line">led = PWM(Pin(<span class="number">12</span>), freq=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 渐亮</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">1024</span>):</span><br><span class="line">        led.duty(i)</span><br><span class="line">        time.sleep_ms(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 渐暗</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1023</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        led.duty(i)</span><br><span class="line">        time.sleep_ms(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h1 id="数模转换器-ADC实验"><a href="#数模转换器-ADC实验" class="headerlink" title="数模转换器 ADC实验"></a>数模转换器 ADC实验</h1><p>前面我们介绍使用 PWM 输出不同电压值，类似于模拟信号输出。如果需要 ESP32 检测外部输入的模拟信号该怎么办？这就是本节课要学习的 ADC，通过 ADC 将模拟信号转换为数字信号给 ESP32 处理。</p>
<h2 id="实验原理-3"><a href="#实验原理-3" class="headerlink" title="实验原理"></a>实验原理</h2><p>在学习 ADC 之前，我们要首先学习什么是模拟信号，什么是数字信号。</p>
<p>模拟信号（Analog Signal）：模拟信号是连续变化的量或者信号，生活中接触到的信号基本都是模拟信号，温度变化，天体运动等等，这些都是连续的信息，都是模拟信号。模拟信号，简单的说就是用电信号模拟出其他的信号，比如用电信号模拟出图像，模拟出声音的声波。</p>
<p>数字信号（Digital Signal）：数字信号是时间离散、数值离散的信号，数字信号存在采样，还存在量化，只能取到一些不连续的固定值，这也是数字信号和模拟信号之间可以进行相互转换的原因。</p>
<p>所以，总结就是模拟信号时间连续，幅值连续，数字信号时间离散，幅值离散。模拟电路就是使用、处理模拟信号的电路；数字电路就是使用、处理数字信号的电路。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202304171040396.png"></p>
<p>我们举个简单的例子：</p>
<ol>
<li>指针时钟显示的就是时间的模拟信号，他表示时间是连续变化的，</li>
<li>数字时钟显示的就是时间的数字信号，时间的显示是按照固定增量变化的，他可以显示 1、2、3，但是无法显示 1.1、2.1、等，所以在数字电路中使用的数字信号一般只能取 0 或 1，把 0 对应为低电平，把 1 对应为高电平，说白了就是有或者没有</li>
</ol>
<p>数字信号是在模拟信号的基础上依次经过 <code>采样</code>、<code>量化</code>、<code>编码</code>而形成的。具体地说，<code>采样</code> 就是把输入的模拟信号按适当的时间间隔得到各个时刻的样本值；<code>量化</code> 是把经采样测得的各个时刻的值用二进制码来表示；<code>编码</code>则是把量化生成的二进制数排列在一起形成顺序脉冲序列。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202304171042814.png"></p>
<p>ADC（Analog to Digital Converter）即模数转换器，它可以将模拟信号转换为数字信号。由于单片机只能识别二进制数字，所以外界模拟信号常常会通过 ADC 转换成其可以识别的数字信号。常见的应用就是将变化的电压转成数字信号。</p>
<p>注意</p>
<p>使用默认配置时，ADC 引脚上的输入电压必须介于 0.0V 和 1.0V 之间（任何高于 1.0V 的值都将读为 4095）。如果需要增加测量范围，需要配置衰减器。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202303011502887.png"></p>
<h2 id="硬件电路设计-3"><a href="#硬件电路设计-3" class="headerlink" title="硬件电路设计"></a>硬件电路设计</h2><p>物料清单（BOM 表）：</p>
<table>
<thead>
<tr>
<th>材料名称</th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td>LED</td>
<td>1</td>
</tr>
<tr>
<td>1kΩ 电阻</td>
<td>1</td>
</tr>
<tr>
<td>电位器</td>
<td>1</td>
</tr>
<tr>
<td>面包板</td>
<td>1</td>
</tr>
<tr>
<td>杜邦线</td>
<td>若干</td>
</tr>
</tbody></table>
<p>电位器相当于一个滑动变阻器，两端引脚阻值是固定的，中间引脚对任何一端的引脚阻值是可变的，他等效于从中间把电位器分成两个串联的电阻，串联总阻值是确定的，一端接输入电源，一端接地</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202310162203141.png"></p>
<h2 id="软件程序设计-3"><a href="#软件程序设计-3" class="headerlink" title="软件程序设计"></a>软件程序设计</h2><p>ADC 在 machine 的 ADC 模块中，我们也是只需要了解其构造对象函数和使用方法即可。</p>
<p>构造方法 <code>machine.ADC(pin, attn)</code>:</p>
<ul>
<li>参数 <code>pin</code>：Pin 对象，</li>
<li>参数 <code>attn</code>：配置衰减器增加电压测量范围。</li>
</ul>
<p>使用方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, ADC</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 26 引脚创建 ADC 对象</span></span><br><span class="line">adc = ADC(Pin(<span class="number">26</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 ADC 值</span></span><br><span class="line"><span class="comment"># 测量精度为 12 位，返回 0-4095（表示 0-1V）</span></span><br><span class="line">val = adc.read()</span><br><span class="line"><span class="comment"># 返回 0-65535 范围内的整数。返回值表示 ADC 获取的原始读数，按比例缩放，最小值为 0，最大值为 65535。</span></span><br><span class="line">val_u16 = adc.read_u16()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置衰减器，能增加电压测量范围，参数可以是 ADC_ATTN_0DB（0dB 衰减，最大输出电压为 1 V, 默认配置）</span></span><br><span class="line"><span class="comment"># ADC_ATTN_2_5DB（2.5dB 衰减，最大输出电压为 1.34 V）、</span></span><br><span class="line"><span class="comment"># ADC_ATTN_6DB（6dB 衰减，最大输出电压为 2 V）、</span></span><br><span class="line"><span class="comment"># ADC_ATTN_11DB（11dB 衰减，最大输出电压为 3.3 V）</span></span><br><span class="line">adc.atten(ADC.ATTN_11DB)</span><br></pre></td></tr></table></figure>

<p>因此，在 shell 环境中打印出当前值的程序可以这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, ADC</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 26 引脚创建 ADC 对象</span></span><br><span class="line">adc = ADC(Pin(<span class="number">26</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置衰减器，配置测量量程为 3.3V</span></span><br><span class="line">adc.atten(ADC.ATTN_11DB)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;adc:<span class="subst">&#123;adc.read()&#125;</span>&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>

<p>我们可以在 shell 控制台，鼠标右击，选择 <code>显示绘图器</code>，他可以把 shell 中输出的数字可视化，这样就可以看到 adc 的图像变化：</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202304171622623.png"></p>
<p>结合上一节课学习的 PWM，我们可以实现用电位器控制 LED 的亮灭，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, ADC, PWM</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 26 引脚创建 ADC 对象, 并配置衰减器，配置测量量程为3.3V</span></span><br><span class="line">adc = ADC(Pin(<span class="number">26</span>, Pin.IN),atten=ADC.ATTN_11DB)</span><br><span class="line"><span class="comment"># 创建 LED PWM 控制对象</span></span><br><span class="line">led = PWM(Pin(<span class="number">13</span>, Pin.OUT), freq=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    led.duty_u16(adc.read_u16())</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>

<h1 id="蜂鸣器实验"><a href="#蜂鸣器实验" class="headerlink" title="蜂鸣器实验"></a>蜂鸣器实验</h1><p>这节课我们学习蜂鸣器，并用蜂鸣器制作电子琴。</p>
<h2 id="实验原理-4"><a href="#实验原理-4" class="headerlink" title="实验原理"></a>实验原理</h2><p>当涉及到蜂鸣器时，我们通常会遇到两种类型：无源蜂鸣器和有源蜂鸣器。它们在工作原理和使用方式上有所不同。</p>
<h3 id="有源蜂鸣器（Active-Buzzer）"><a href="#有源蜂鸣器（Active-Buzzer）" class="headerlink" title="有源蜂鸣器（Active Buzzer）"></a>有源蜂鸣器（Active Buzzer）</h3><p>有源蜂鸣器是一种集成了驱动电路的蜂鸣器，它可以直接通过电流激励产生声音，不需要外部设备。有源蜂鸣器内部集成了振片、驱动电路和共振腔。当给有源蜂鸣器提供电流时，它会根据电流的变化产生声音。有源蜂鸣器通常具有更好的声音质量和音量控制能力。在使用有源蜂鸣器时，我们可以通过控制电流的大小和频率来控制蜂鸣器的声音。一般来说，我们可以通过改变输入电流的大小来调整音量，通过改变输入电流的频率来调整音调和音乐效果。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305161546041.png"></p>
<h3 id="无源蜂鸣器（Passive-Buzzer）"><a href="#无源蜂鸣器（Passive-Buzzer）" class="headerlink" title="无源蜂鸣器（Passive Buzzer）"></a>无源蜂鸣器（Passive Buzzer）</h3><p>无源蜂鸣器是一种简单的声音发生器，它通常由振片和共振腔组成。无源蜂鸣器不具备驱动电路，因此需要外部的电子设备来产生声音。当给无源蜂鸣器施加交变电压时，振片会振动并产生声音。无源蜂鸣器的工作频率由施加的电压频率决定。在使用无源蜂鸣器时，我们需要通过控制电压的频率和占空比来控制蜂鸣器的声音。通过改变交变电压的频率和占空比，我们可以产生不同的音调和音乐效果。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305161547125.png"></p>
<p>需要注意的是，无论是无源蜂鸣器还是有源蜂鸣器，其工作电压和电流都需要在规定范围内，以免损坏蜂鸣器或引起其他问题。</p>
<p>总结起来，无源蜂鸣器和有源蜂鸣器是两种常见的蜂鸣器类型。无源蜂鸣器需要外部设备来产生声音，而有源蜂鸣器内部集成了驱动电路，可以直接产生声音。在使用时，我们通过控制电压的频率、占空比或电流的大小和频率来控制蜂鸣器的声音。</p>
<h2 id="硬件电路设计-4"><a href="#硬件电路设计-4" class="headerlink" title="硬件电路设计"></a>硬件电路设计</h2><p>物料清单（BOM 表）：</p>
<table>
<thead>
<tr>
<th>材料名称</th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td>按键开关</td>
<td>6</td>
</tr>
<tr>
<td>无源蜂鸣器</td>
<td>1</td>
</tr>
<tr>
<td>有源蜂鸣器</td>
<td>1</td>
</tr>
<tr>
<td>杜邦线(跳线)</td>
<td>若干</td>
</tr>
<tr>
<td>面包板</td>
<td>1</td>
</tr>
</tbody></table>
<p>有源蜂鸣器正极接 D22，无源蜂鸣器正极接 D23；6 个按键依次接 D25，D26，D27，D14，D12，D13。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305162113827.png"></p>
<h2 id="软件程序设计-4"><a href="#软件程序设计-4" class="headerlink" title="软件程序设计"></a>软件程序设计</h2><h3 id="1-有源蜂鸣器定时器闹钟"><a href="#1-有源蜂鸣器定时器闹钟" class="headerlink" title="1. 有源蜂鸣器定时器闹钟"></a>1. 有源蜂鸣器定时器闹钟</h3><p>我们可以通过外部中断和定时器中断来制作一个闹钟，按下按键时中断闹钟</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, Timer</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义控制引脚对象</span></span><br><span class="line">button = Pin(<span class="number">13</span>, Pin.IN, Pin.PULL_UP)</span><br><span class="line">active_buzzer = Pin(<span class="number">22</span>, Pin.OUT)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 button 的外部中断函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">button_irq</span>(<span class="params">button</span>):</span><br><span class="line">    time.sleep_ms(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> button.value():</span><br><span class="line">        active_buzzer.off()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义定时器中断的回调函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer_irq</span>(<span class="params">timer_pin</span>):</span><br><span class="line">    active_buzzer.value(<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义定时器</span></span><br><span class="line">timer = Timer(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 初始化定时器,设置闹钟开启时间</span></span><br><span class="line">timer.init(period=<span class="number">5000</span>, mode=Timer.ONE_SHOT, callback=timer_irq)</span><br><span class="line"><span class="comment"># 设置按键中断,打断闹钟</span></span><br><span class="line">button.irq(button_irq, Pin.IRQ_FALLING)</span><br></pre></td></tr></table></figure>

<h3 id="2-6-音符电子琴"><a href="#2-6-音符电子琴" class="headerlink" title="2. 6 音符电子琴"></a>2. 6 音符电子琴</h3><p>我们想要弹奏一首歌就需要他的乐谱，最简单的就是小星星，</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305162046073.png"></p>
<p>蜂鸣器是通过不同的频率发出不同声调的，具体对应数值如下图：</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305161545167.png"></p>
<p>我们可以按照上图乐谱，用 6 个按键分别控制不同的音符，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, PWM</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义按键对象，并存储到列表中</span></span><br><span class="line">button_1 = Pin(<span class="number">25</span>, Pin.IN, Pin.PULL_UP)</span><br><span class="line">button_2 = Pin(<span class="number">26</span>, Pin.IN, Pin.PULL_UP)</span><br><span class="line">button_3 = Pin(<span class="number">27</span>, Pin.IN, Pin.PULL_UP)</span><br><span class="line">button_4 = Pin(<span class="number">14</span>, Pin.IN, Pin.PULL_UP)</span><br><span class="line">button_5 = Pin(<span class="number">12</span>, Pin.IN, Pin.PULL_UP)</span><br><span class="line">button_6 = Pin(<span class="number">13</span>, Pin.IN, Pin.PULL_UP)</span><br><span class="line">button_list = [button_1, button_2, button_3, button_4, button_5, button_6]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义无源蜂鸣器 PWM 控制对象</span></span><br><span class="line">pos_buzzer = PWM(Pin(<span class="number">23</span>, Pin.OUT))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义音符对应频率</span></span><br><span class="line">tone_list = [<span class="number">262</span>, <span class="number">294</span>, <span class="number">330</span>, <span class="number">350</span>, <span class="number">393</span>, <span class="number">441</span>, <span class="number">495</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化音符频率</span></span><br><span class="line">tone = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 检测哪个按键触发</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(button_list)):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> button_list[i].value():</span><br><span class="line">            tone = tone_list[i]</span><br><span class="line">            <span class="built_in">print</span>(i)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 蜂鸣器发声</span></span><br><span class="line">    <span class="keyword">if</span> tone:</span><br><span class="line">        pos_buzzer.duty(<span class="number">512</span>)</span><br><span class="line">        pos_buzzer.freq(tone)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        pos_buzzer.duty(<span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">    tone = <span class="number">0</span></span><br><span class="line">    time.sleep_ms(<span class="number">10</span>) </span><br></pre></td></tr></table></figure>

<h3 id="3-播放音乐"><a href="#3-播放音乐" class="headerlink" title="3. 播放音乐"></a>3. 播放音乐</h3><p>我们也可以自动播放这首歌，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> machine <span class="keyword">import</span> Pin, PWM</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义无源蜂鸣器 PWM 对象</span></span><br><span class="line">pos_buzzer = PWM(Pin(<span class="number">23</span>, Pin.OUT))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义音调频率列表</span></span><br><span class="line">tone_list = [<span class="number">262</span>, <span class="number">294</span>, <span class="number">330</span>, <span class="number">350</span>, <span class="number">393</span>, <span class="number">441</span>, <span class="number">495</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义乐谱音符列表</span></span><br><span class="line">music = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">4</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动播放音乐</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> music:</span><br><span class="line">    pos_buzzer.duty(<span class="number">900</span>)</span><br><span class="line">    <span class="keyword">if</span> i:</span><br><span class="line">        pos_buzzer.freq(tone_list[i-<span class="number">1</span>])</span><br><span class="line">        time.sleep_ms(<span class="number">500</span>)</span><br><span class="line">        pos_buzzer.duty(<span class="number">0</span>)</span><br><span class="line">        time.sleep_ms(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 占空比设置为 0</span></span><br><span class="line">pos_buzzer.duty(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h1 id="获取网络请求"><a href="#获取网络请求" class="headerlink" title="获取网络请求"></a>获取网络请求</h1><p>这节课我们来学习如何使用 ESP32 获取网络请求。</p>
<h2 id="实验原理-5"><a href="#实验原理-5" class="headerlink" title="实验原理"></a>实验原理</h2><p>ESP32 支持 2.4G 网络，那我们可以通过发送 HTTP 请求来获取实时天气数据。一般来说，天气数据是由一些公共 API 接口提供的，这些接口需要向它们发送 HTTP 请求以获取数据。</p>
<h3 id="HTTP-请求与-API"><a href="#HTTP-请求与-API" class="headerlink" title="HTTP 请求与 API"></a>HTTP 请求与 API</h3><p>当我们在浏览器中输入网址或者使用应用程序时，我们实际上是向服务器发出请求。HTTP 请求是客户端（如浏览器）与服务器之间通信的方式，用于获取或发送 Web 资源。这些资源可以是文本文件、图像、脚本等，客户端通过 HTTP 协议发起请求，服务器返回相应的响应。</p>
<p>HTTP 请求通常由以下几个部分组成：</p>
<ol>
<li><code>请求行</code>：包含请求方法、请求 URL 和 HTTP 协议版本，例如</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https://www.baidu.com/content-search.xml HTTP/1.1</span><br></pre></td></tr></table></figure>

<p><code>GET</code> 是请求方法，<code>https://www.baidu com/</code> 是 URL 地址，<code>HTTP/1.1</code> 指定了协议版本。</p>
<p>HTTP 协议版本一般都是 <code>HTTP/1.1</code>，URL 是你要访问的地址，而请求方法除了 GET 还有 POST、PUT、DELETE 经常使用的 4 个请求方式，以及一些其他的请求方法。</p>
<ol start="2">
<li><code>请求头</code>：包含与请求相关的信息，例如浏览器类型、请求时间等。</li>
<li><code>请求体</code>：包含请求所需的数据。</li>
</ol>
<p>我们虽然可以对任意网址发送网络请求，但是这样毫无意义，比如，我想要获取某个地区的天气状况，就需要调用相对应的接口，也就是 API。</p>
<p>API（Application Programming Interface）是指应用程序编程接口，它定义了应用程序之间进行通信的方式和规范。API 允许不同的应用程序之间进行数据交换，使得应用程序可以共享资源和信息，从而提高应用程序的效率和可用性。</p>
<p>API 通常使用 HTTP 请求来提供服务，客户端通过发送 HTTP 请求访问 API，服务器则通过 HTTP 响应返回所需的数据。API 可以提供许多不同的服务，例如访问数据库、获取实时数据、处理图像等。</p>
<p>当我们使用别人提供的 API 的时候就需要遵守别人制定的规则，使用对应的链接、请求方法等等，我们需要查看 API 文档来获取这些信息。比如，我们今天使用聚合数据的 API 接口。</p>
<p><img src="https://gcore.jsdelivr.net/gh/bigrich-luo/typora-picgo-images-1@master/images/202305081647220.png"></p>
<p>总之，HTTP 请求是客户端与服务器之间通信的方式，API 则是应用程序之间通信的方式。通过 HTTP 请求访问 API，我们可以实现不同应用程序之间的数据交换和共享。</p>
<h3 id="JSON-数据"><a href="#JSON-数据" class="headerlink" title="JSON 数据"></a>JSON 数据</h3><p>JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，常用于 Web 应用程序之间的数据传输。它是一种文本格式，易于阅读和编写，并且可以被各种编程语言支持。</p>
<p>JSON 数据由键值对组成，其中键是字符串，值可以是字符串、数字、布尔值、数组、对象等数据类型。一个基本的 JSON 对象看起来像这样：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;罗大富&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">29</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;isStudent&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hobbies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;睡觉&quot;</span><span class="punctuation">,</span> <span class="string">&quot;打游戏&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;菏泽&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;山东&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其中，<code>name</code>、<code>age</code>、<code>isStudent</code>、<code>hobbies</code> 和 <code>address</code> 都是键，而对应的值分别是字符串 <code>&quot;罗大富&quot;</code>、数字 <code>29</code>、布尔值 <code>false</code>、字符串数组 <code>[&quot;睡觉&quot;, &quot;打游戏&quot;]</code> 和一个嵌套的 JSON 对象 <code>&#123;&quot;city&quot;: &quot;菏泽&quot;, &quot;state&quot;: &quot;山东&quot;&#125;</code>。</p>
<p>JSON 数据通常用于 Web 应用程序中，例如从后端服务器获取数据或向后端服务器发送数据。在前端 JavaScript 中，可以使用内置的 JSON 对象将 JSON 字符串转换为 JavaScript 对象，或将 JavaScript 对象转换为 JSON 字符串。</p>
<h2 id="软件程序设计-5"><a href="#软件程序设计-5" class="headerlink" title="软件程序设计"></a>软件程序设计</h2><h3 id="urequests-模块"><a href="#urequests-模块" class="headerlink" title="urequests 模块"></a>urequests 模块</h3><p>当我们使用 MicroPython 在嵌入式系统中开发物联网（IoT）应用时，我们通常需要使用网络连接。通过使用 MicroPython 的 urequests 模块，可以轻松地从 Web 服务器上获取数据，实现基于网络的功能。</p>
<p>urequests 模块是用于在 MicroPython 中进行 HTTP 请求的模块。它实现了 HTTP 客户端协议，允许我们使用 GET、POST、PUT 和 DELETE 请求等基本的 HTTP 请求类型。</p>
<p>下面是使用 urequests 模块发送 GET 请求的示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urequests</span><br><span class="line"></span><br><span class="line">response = urequests.get(<span class="string">&#x27;https://www.example.com&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.text)</span><br></pre></td></tr></table></figure>

<p>这个示例中，我们使用 <code>urequests.get()</code> 方法向 <code>https://www.example.com</code> 发送 GET 请求，并将响应的内容打印出来。</p>
<p>注意</p>
<p>注意，在发送 HTTP 请求后，我们需要使用 response.text 来获取服务器返回的数据，或者，我们可以使用 json() 方法，把 json 数据转换成字典。</p>
<p>除了 <code>get()</code> 方法，<code>urequests</code> 模块还提供了其他几个方法：</p>
<ul>
<li><code>post(url, data=None, json=None, headers=&#123;&#125;, **kw)</code>: 发送 HTTP POST 请求。<code>data</code> 参数用于指定请求数据，<code>json</code> 参数用于指定 <code>JSON</code> 数据，<code>headers</code> 参数用于指定 HTTP 标头，<code>**kw</code> 参数用于传递其他参数；</li>
<li><code>put(url, data=None, **kw)</code>: 发送 HTTP PUT 请求。<code>data</code> 参数用于指定请求数据，<code>**kw</code> 参数用于传递其他参数；</li>
<li><code>delete(url, **kw)</code>: 发送 HTTP DELETE 请求。<code>**kw</code> 参数用于传递其他参数。</li>
</ul>
<p>在发送请求时，我们可以通过传递参数来指定请求的数据、标头和其他选项。下面是一个例子，展示如何向 Web 服务器发送带有自定义标头的 GET 请求：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urequests</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer &lt;token&gt;&#x27;</span>&#125;</span><br><span class="line">response = urequests.get(<span class="string">&#x27;https://api.example.com&#x27;</span>, headers=headers)</span><br><span class="line"><span class="built_in">print</span>(response.text)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在这个示例中，我们在 <code>headers</code> 参数中指定了一个名为 <code>Authorization</code> 的标头，以便在请求中包含我们的 API 令牌。</p>
<p>总之，通过使用 <code>urequests</code> 模块，我们可以轻松地在 MicroPython 中进行 HTTP 请求，与互联网上的 Web 服务器进行通信，并在 IoT 应用中获取所需的数据。</p>
<h3 id="1-获取实时天气数据"><a href="#1-获取实时天气数据" class="headerlink" title="1. 获取实时天气数据"></a>1. 获取实时天气数据</h3><p>在使用前，一定要先连接 WiFi</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urequests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义请求参数字典</span></span><br><span class="line">request_params = &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;郑州&#x27;</span>, <span class="string">&#x27;key&#x27;</span>: <span class="string">&#x27;你自己的 api 密钥&#x27;</span>&#125;</span><br><span class="line">response = urequests.post(<span class="string">f&#x27;http://apis.juhe.cn/simpleWeather/query?city=<span class="subst">&#123;request_params [<span class="string">&quot;city&quot;</span>]&#125;</span>&amp;key=<span class="subst">&#123;request_params [<span class="string">&quot;key&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(response.text)</span></span><br><span class="line"><span class="comment"># print(type(response.json()))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取数据</span></span><br><span class="line">realtime = response.json()[<span class="string">&#x27;result&#x27;</span>][<span class="string">&#x27;realtime&#x27;</span>]</span><br><span class="line">temp = realtime[<span class="string">&#x27;temperature&#x27;</span>]</span><br><span class="line">info = realtime[<span class="string">&#x27;info&#x27;</span>]</span><br><span class="line">aqi = realtime[<span class="string">&#x27;aqi&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;温度：<span class="subst">&#123;temp&#125;</span>°C\n天气：<span class="subst">&#123;info&#125;</span>\n空气指数：<span class="subst">&#123;aqi&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="如何制作自己的-API-后台"><a href="#如何制作自己的-API-后台" class="headerlink" title="如何制作自己的 API 后台"></a>如何制作自己的 API 后台</h2><p>我们目前使用的这些 API 接口，都是其他公司提供的服务，而如果我们想要搭建自己的 API 接口，该怎么办呢？</p>
<p>首先，你需要明白，想要搭建自己的 API 接口，其实就是搭建你自己的网站，而搭建网站分为前端和后端，前端和后端是指构成Web应用程序的两个主要部分：</p>
<ol>
<li>前端通常指 Web 应用程序中用户可以看到和与之交互的部分，包括网页布局、样式、交互和功能；</li>
<li>后端则是指 Web 应用程序的后台，用于处理服务器端的逻辑和数据存储，例如数据库和 API。</li>
</ol>
<p>后端的功能往往是由编程语言（如 Python、Java 等）和相关框架实现的，而前端通常由 HTML、CSS 和 JavaScript 等技术实现。前端和后端需要通过网络协议（如 HTTP）进行通信，将前端用户输入的数据传递到后端进行处理，再将处理结果返回到前端。</p>
<p>前端和后端的交互使得 Web 应用程序具有强大的功能和可扩展性。</p>
<p>如果你是非科班出身，想要转行做程序员，前端是你最好的选择，WEB 前端是最容易入门的编程岗位，初级前端技术很容易掌握，高级前端需要一步步学习和工作经验的积累。</p>
<p>后端的分类就很多了，国内主流的后端开发使用的是 Java、Go、Python、Node.js、C++、Rust、PHP 等。所以你该怎么选呢？以下仅代表我个人建议：</p>
<ol>
<li>如果你明确目的，打算未来深耕于 Web 后端，你的第一选择必然是 Java，因为 Java 在国内 Web 开发的地位无法撼动；</li>
<li>如果你是前端程序员，打算转行后端，那就先从 Node.js 开始，简单的说 Node.js 就是运行在服务端的 JavaScript，而 JS 也是前端必学的三大基础内容；</li>
<li>如果你并非前两者，Python 就是你最好的选择，使用 Python 最大的优点就是简单、效率高，我们后面也会给大家带来 Python Web 开发的教程；</li>
<li>千万不要学 PHP，大家或许听过 “PHP 是最好的语言” 这个程序员常用梗，因为 PHP 上手比较简单，收获了很多开发者，又是早期互联网的重要服务端语言，所以在各个社交平台上时常能见到讨论，甚至吹捧 PHP 的文章。其中难免有些技术较差，或者不能接受新技术的上古遗老开发者，于是只能在网上做键盘侠，声称 PHP 是最好的语言。</li>
</ol>
<h1 id="I2C驱动oled制作菜单"><a href="#I2C驱动oled制作菜单" class="headerlink" title="I2C驱动oled制作菜单"></a>I2C驱动oled制作菜单</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> machine</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> ssd1306 <span class="keyword">import</span> SSD1306_I2C</span><br><span class="line"><span class="keyword">from</span> ps2key <span class="keyword">import</span> direction_joystick</span><br><span class="line"><span class="comment"># 1.将单片机上面的i2c准备好</span></span><br><span class="line">i2c = machine.I2C(<span class="number">1</span>,scl=machine.Pin(<span class="number">15</span>),sda=machine.Pin(<span class="number">2</span>),freq=<span class="number">100000</span>)</span><br><span class="line"><span class="comment"># 2.建立oled并且与已经设置好i2c通信的端口进行绑定</span></span><br><span class="line">oled = SSD1306_I2C(<span class="number">128</span>,<span class="number">64</span>,i2c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.准备字库</span></span><br><span class="line">fonts = &#123;</span><br><span class="line">    <span class="comment">#0</span></span><br><span class="line">    <span class="string">&#x27;num0&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,</span><br><span class="line"><span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,</span><br><span class="line"><span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,</span><br><span class="line"><span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,</span><br><span class="line"><span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#1</span></span><br><span class="line">    <span class="string">&#x27;num1&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x0F</span>,<span class="number">0x1F</span>,<span class="number">0x3F</span>,<span class="number">0x7B</span>,<span class="number">0xF3</span>,<span class="number">0xF3</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,</span><br><span class="line"><span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x0F</span>,<span class="number">0x7F</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,</span><br><span class="line"><span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0xE0</span>,<span class="number">0xFC</span>,<span class="number">0xFE</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#2</span></span><br><span class="line">    <span class="string">&#x27;num2&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x0F</span>,<span class="number">0x3F</span>,<span class="number">0x78</span>,<span class="number">0x70</span>,<span class="number">0xE0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,</span><br><span class="line"><span class="number">0x03</span>,<span class="number">0x07</span>,<span class="number">0x0E</span>,<span class="number">0x1C</span>,<span class="number">0x38</span>,<span class="number">0x70</span>,<span class="number">0xF0</span>,<span class="number">0xE0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xE0</span>,<span class="number">0xF0</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x7F</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xF0</span>,<span class="number">0xFC</span>,<span class="number">0x3E</span>,<span class="number">0x0F</span>,<span class="number">0x07</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x07</span>,<span class="number">0x0E</span>,<span class="number">0x1C</span>,<span class="number">0x3C</span>,<span class="number">0x78</span>,<span class="number">0xF0</span>,<span class="number">0xC0</span>,</span><br><span class="line"><span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#3</span></span><br><span class="line">    <span class="string">&#x27;num3&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xE0</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xE0</span>,<span class="number">0xE0</span>,<span class="number">0xE0</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0x07</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#4</span></span><br><span class="line">    <span class="string">&#x27;num4&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,</span><br><span class="line"><span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x0C</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xE0</span>,</span><br><span class="line"><span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#5</span></span><br><span class="line">    <span class="string">&#x27;num5&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,</span><br><span class="line"><span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#6</span></span><br><span class="line">    <span class="string">&#x27;num6&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,</span><br><span class="line"><span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,</span><br><span class="line"><span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#7</span></span><br><span class="line">    <span class="string">&#x27;num7&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,</span><br><span class="line"><span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,</span><br><span class="line"><span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#8</span></span><br><span class="line">    <span class="string">&#x27;num8&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,</span><br><span class="line"><span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xE0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xE0</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xE0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xE0</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x03</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x03</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x03</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x03</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,</span><br><span class="line"><span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="comment">#9</span></span><br><span class="line">    <span class="string">&#x27;num9&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x7F</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0xFF</span>,<span class="number">0xFF</span>,</span><br><span class="line"><span class="number">0xFF</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,</span><br><span class="line"><span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>],</span><br><span class="line">    <span class="string">&#x27;:&#x27;</span>:[<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>]</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment"># 4.建立实时时钟</span></span><br><span class="line">rtc = machine.RTC()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义菜单选项</span></span><br><span class="line">all_menu = [<span class="string">&#x27;first&#x27;</span>,<span class="string">&#x27;second&#x27;</span>]</span><br><span class="line">menu_items = [<span class="string">&#x27;weather&#x27;</span>, <span class="string">&#x27;songs&#x27;</span>, <span class="string">&#x27;QR code&#x27;</span>, <span class="string">&#x27;Game play&#x27;</span>]</span><br><span class="line"><span class="comment"># 记录当前位置的值</span></span><br><span class="line">current_item = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="comment"># 菜单目录显示</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">second_menu</span>():</span><br><span class="line">    time.sleep_ms(<span class="number">50</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        oled.fill(<span class="number">0</span>)</span><br><span class="line">        oled.text(<span class="string">&#x27;Menu&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        oled.text(<span class="string">&#x27;-&#x27;</span> * <span class="number">20</span>, <span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(menu_items)):</span><br><span class="line">            <span class="keyword">if</span> i == index:</span><br><span class="line">                oled.text(<span class="string">&#x27;&gt; &#x27;</span> + menu_items[i], <span class="number">0</span>, <span class="number">20</span> + i * <span class="number">10</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                oled.text(menu_items[i], <span class="number">0</span>, <span class="number">20</span> + i * <span class="number">10</span>)</span><br><span class="line">        oled.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 年，月，日，工作日，小时，分钟，秒</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rtc_oled_time</span>(<span class="params">param</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>):</span><br><span class="line">        </span><br><span class="line">        left = <span class="built_in">bin</span>(fonts[param][i]).replace(<span class="string">&#x27;0b&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">len</span>(left)&lt;<span class="number">8</span>):</span><br><span class="line">            left=<span class="string">&#x27;0&#x27;</span>+left</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># print((left+left_1+right+right_1).replace(&#x27;0&#x27;,&#x27;-&#x27;))</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(left)):</span><br><span class="line">            oled.pixel(j+<span class="number">62</span>,i,<span class="built_in">int</span>(left[j]))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rtc_oled</span>(<span class="params">time_strList</span>):</span><br><span class="line">    offset = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(time_strList)):</span><br><span class="line">        count = <span class="built_in">int</span>(time_strList[k])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;count = <span class="subst">&#123;count&#125;</span>&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>):</span><br><span class="line">            </span><br><span class="line">            left = <span class="built_in">bin</span>(fonts[<span class="string">&#x27;num&#x27;</span>+<span class="built_in">str</span>(count)][i]).replace(<span class="string">&#x27;0b&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            left_1 = <span class="built_in">bin</span>(fonts[<span class="string">&#x27;num&#x27;</span>+<span class="built_in">str</span>(count)][i+<span class="number">32</span>]).replace(<span class="string">&#x27;0b&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            right = <span class="built_in">bin</span>(fonts[<span class="string">&#x27;num&#x27;</span>+<span class="built_in">str</span>(count)][i+<span class="number">64</span>]).replace(<span class="string">&#x27;0b&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            right_1 = <span class="built_in">bin</span>(fonts[<span class="string">&#x27;num&#x27;</span>+<span class="built_in">str</span>(count)][i+<span class="number">96</span>]).replace(<span class="string">&#x27;0b&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">len</span>(left)&lt;<span class="number">8</span>):</span><br><span class="line">                left=<span class="string">&#x27;0&#x27;</span>+left</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">len</span>(left_1)&lt;<span class="number">8</span>):</span><br><span class="line">                left_1=<span class="string">&#x27;0&#x27;</span>+left_1</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">len</span>(right)&lt;<span class="number">8</span>):</span><br><span class="line">                right=<span class="string">&#x27;0&#x27;</span>+right</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">len</span>(right_1)&lt;<span class="number">8</span>):</span><br><span class="line">                right_1=<span class="string">&#x27;0&#x27;</span>+right_1</span><br><span class="line">            <span class="comment"># print((left+left_1+right+right_1).replace(&#x27;0&#x27;,&#x27;-&#x27;))</span></span><br><span class="line">            </span><br><span class="line">            num_binary = left+left_1+right+right_1</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(num_binary)):</span><br><span class="line">                oled.pixel(j+offset,i,<span class="built_in">int</span>(num_binary[j]))</span><br><span class="line">        <span class="keyword">if</span>(offset == <span class="number">96</span>):</span><br><span class="line">            offset=-<span class="number">32</span></span><br><span class="line">        offset = offset+<span class="number">32</span> </span><br><span class="line">    <span class="comment"># oled.show()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">double_display</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span>(num&gt;<span class="number">9</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(num)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;0&#x27;</span>+<span class="built_in">str</span>(num)</span><br><span class="line"><span class="comment"># 将首页时间显示界面封装到下面的函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">first_menu</span>(<span class="params">symble</span>):</span><br><span class="line">    <span class="keyword">while</span> symble:</span><br><span class="line">        oled.fill(<span class="number">0</span>)</span><br><span class="line">        now = rtc.datetime()</span><br><span class="line">        hour_mini = double_display(now[<span class="number">4</span>])+double_display(now[<span class="number">5</span>])</span><br><span class="line">        rtc_oled(hour_mini)</span><br><span class="line">        rtc_oled_time(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">        oled.text(<span class="string">f&#x27;author:fy&#x27;</span>,<span class="number">0</span>,<span class="number">45</span>)</span><br><span class="line">        oled.text(<span class="string">f&#x27;seconds:<span class="subst">&#123;now[<span class="number">6</span>]&#125;</span>&#x27;</span>,<span class="number">0</span>,<span class="number">55</span>)</span><br><span class="line">        oled.show()</span><br><span class="line">index_menu = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_menu_show</span>(<span class="params">index_menu</span>):</span><br><span class="line">    <span class="keyword">if</span> index_menu == <span class="number">0</span>:</span><br><span class="line">        first_menu(index_menu==<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">elif</span> index_menu == <span class="number">1</span>:</span><br><span class="line">        second_menu()</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    convert = direction_joystick(<span class="number">32</span>,<span class="number">33</span>,<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span>(convert == <span class="string">&#x27;right&#x27;</span>):</span><br><span class="line">        index_menu=index_menu+<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span>(convert == <span class="string">&#x27;left&#x27;</span>):</span><br><span class="line">        index_menu=index_menu-<span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    index_menu_show(index_menu%<span class="built_in">len</span>(all_menu))</span><br><span class="line">    <span class="comment"># print(now,type(now[0]))</span></span><br><span class="line">    <span class="comment"># time.sleep(1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://fylhg.github.io/github.fy">二马山石</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://fylhg.github.io/github.fy/2024/07/04/esp32%E7%AC%94%E8%AE%B0/">https://fylhg.github.io/github.fy/2024/07/04/esp32%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://fylhg.github.io/github.fy" target="_blank">FY的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/github.fy/tags/esp32/">esp32</a></div><div class="post_share"><div class="social-share" data-image="http://micropython.86x.net/en/latet/_images/esp32.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/github.fy/2024/07/12/C++/" title="c++"><img class="cover" src="https://img2.baidu.com/it/u=1339810107,1799612389&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=512&amp;h=328" onerror="onerror=null;src='/github.fy/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">c++</div></div></a></div><div class="next-post pull-right"><a href="/github.fy/2024/05/25/Verilog%E8%AF%AD%E6%B3%95/" title="verilog语法"><img class="cover" src="https://picx.zhimg.com/v2-8914ff9e3185a4a0e1ac1f7b037e9cb8_720w.jpg?source=172ae18b" onerror="onerror=null;src='/github.fy/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">verilog语法</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/github.fy/img/1.jpg" onerror="this.onerror=null;this.src='/github.fy/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">二马山石</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/github.fy/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/github.fy/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/github.fy/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD"><span class="toc-number">1.</span> <span class="toc-text">外部中断</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86"><span class="toc-number">1.1.</span> <span class="toc-text">实验原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.2.</span> <span class="toc-text">硬件电路设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.3.</span> <span class="toc-text">软件程序设计</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PS2%E5%8F%8C%E8%BD%B4%E6%8C%89%E9%94%AE%E6%91%87%E6%9D%86"><span class="toc-number">2.</span> <span class="toc-text">PS2双轴按键摇杆</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86-1"><span class="toc-number">2.1.</span> <span class="toc-text">实验原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1-1"><span class="toc-number">2.2.</span> <span class="toc-text">硬件电路设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-1"><span class="toc-number">2.3.</span> <span class="toc-text">软件程序设计</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PWM%E9%A9%B1%E5%8A%A8%E5%91%BC%E5%90%B8%E7%81%AF"><span class="toc-number">3.</span> <span class="toc-text">PWM驱动呼吸灯</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86-2"><span class="toc-number">3.1.</span> <span class="toc-text">实验原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1-2"><span class="toc-number">3.2.</span> <span class="toc-text">硬件电路设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-2"><span class="toc-number">3.3.</span> <span class="toc-text">软件程序设计</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%A8%A1%E8%BD%AC%E6%8D%A2%E5%99%A8-ADC%E5%AE%9E%E9%AA%8C"><span class="toc-number">4.</span> <span class="toc-text">数模转换器 ADC实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86-3"><span class="toc-number">4.1.</span> <span class="toc-text">实验原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1-3"><span class="toc-number">4.2.</span> <span class="toc-text">硬件电路设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-3"><span class="toc-number">4.3.</span> <span class="toc-text">软件程序设计</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%9C%82%E9%B8%A3%E5%99%A8%E5%AE%9E%E9%AA%8C"><span class="toc-number">5.</span> <span class="toc-text">蜂鸣器实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86-4"><span class="toc-number">5.1.</span> <span class="toc-text">实验原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E6%BA%90%E8%9C%82%E9%B8%A3%E5%99%A8%EF%BC%88Active-Buzzer%EF%BC%89"><span class="toc-number">5.1.1.</span> <span class="toc-text">有源蜂鸣器（Active Buzzer）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E6%BA%90%E8%9C%82%E9%B8%A3%E5%99%A8%EF%BC%88Passive-Buzzer%EF%BC%89"><span class="toc-number">5.1.2.</span> <span class="toc-text">无源蜂鸣器（Passive Buzzer）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1-4"><span class="toc-number">5.2.</span> <span class="toc-text">硬件电路设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-4"><span class="toc-number">5.3.</span> <span class="toc-text">软件程序设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9C%89%E6%BA%90%E8%9C%82%E9%B8%A3%E5%99%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E9%97%B9%E9%92%9F"><span class="toc-number">5.3.1.</span> <span class="toc-text">1. 有源蜂鸣器定时器闹钟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E9%9F%B3%E7%AC%A6%E7%94%B5%E5%AD%90%E7%90%B4"><span class="toc-number">5.3.2.</span> <span class="toc-text">2. 6 音符电子琴</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%92%AD%E6%94%BE%E9%9F%B3%E4%B9%90"><span class="toc-number">5.3.3.</span> <span class="toc-text">3. 播放音乐</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-number">6.</span> <span class="toc-text">获取网络请求</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86-5"><span class="toc-number">6.1.</span> <span class="toc-text">实验原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E8%AF%B7%E6%B1%82%E4%B8%8E-API"><span class="toc-number">6.1.1.</span> <span class="toc-text">HTTP 请求与 API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON-%E6%95%B0%E6%8D%AE"><span class="toc-number">6.1.2.</span> <span class="toc-text">JSON 数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-5"><span class="toc-number">6.2.</span> <span class="toc-text">软件程序设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#urequests-%E6%A8%A1%E5%9D%97"><span class="toc-number">6.2.1.</span> <span class="toc-text">urequests 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96%E5%AE%9E%E6%97%B6%E5%A4%A9%E6%B0%94%E6%95%B0%E6%8D%AE"><span class="toc-number">6.2.2.</span> <span class="toc-text">1. 获取实时天气数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%B6%E4%BD%9C%E8%87%AA%E5%B7%B1%E7%9A%84-API-%E5%90%8E%E5%8F%B0"><span class="toc-number">6.3.</span> <span class="toc-text">如何制作自己的 API 后台</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#I2C%E9%A9%B1%E5%8A%A8oled%E5%88%B6%E4%BD%9C%E8%8F%9C%E5%8D%95"><span class="toc-number">7.</span> <span class="toc-text">I2C驱动oled制作菜单</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/github.fy/2024/08/05/QT%20-%20add/" title="Qt"><img src="https://t8.baidu.com/it/u=4067589254,2956208776&amp;fm=193" onerror="this.onerror=null;this.src='/github.fy/img/404.jpg'" alt="Qt"/></a><div class="content"><a class="title" href="/github.fy/2024/08/05/QT%20-%20add/" title="Qt">Qt</a><time datetime="2024-08-05T05:59:31.581Z" title="发表于 2024-08-05 13:59:31">2024-08-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/github.fy/2024/07/31/%E5%8A%9B%E6%89%A3%E9%A2%98%E7%9B%AE/" title="leetcode"><img src="/github.fy/img/404.jpg" onerror="this.onerror=null;this.src='/github.fy/img/404.jpg'" alt="leetcode"/></a><div class="content"><a class="title" href="/github.fy/2024/07/31/%E5%8A%9B%E6%89%A3%E9%A2%98%E7%9B%AE/" title="leetcode">leetcode</a><time datetime="2024-07-31T08:42:06.141Z" title="发表于 2024-07-31 16:42:06">2024-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/github.fy/2024/07/21/QT/" title="Qt"><img src="https://t8.baidu.com/it/u=4067589254,2956208776&amp;fm=193" onerror="this.onerror=null;this.src='/github.fy/img/404.jpg'" alt="Qt"/></a><div class="content"><a class="title" href="/github.fy/2024/07/21/QT/" title="Qt">Qt</a><time datetime="2024-07-21T05:50:00.611Z" title="发表于 2024-07-21 13:50:00">2024-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/github.fy/2024/07/12/C++/" title="c++"><img src="https://img2.baidu.com/it/u=1339810107,1799612389&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=512&amp;h=328" onerror="this.onerror=null;this.src='/github.fy/img/404.jpg'" alt="c++"/></a><div class="content"><a class="title" href="/github.fy/2024/07/12/C++/" title="c++">c++</a><time datetime="2024-07-12T07:18:51.931Z" title="发表于 2024-07-12 15:18:51">2024-07-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/github.fy/2024/07/04/esp32%E7%AC%94%E8%AE%B0/" title="esp32"><img src="http://micropython.86x.net/en/latet/_images/esp32.jpg" onerror="this.onerror=null;this.src='/github.fy/img/404.jpg'" alt="esp32"/></a><div class="content"><a class="title" href="/github.fy/2024/07/04/esp32%E7%AC%94%E8%AE%B0/" title="esp32">esp32</a><time datetime="2024-07-04T05:46:02.527Z" title="发表于 2024-07-04 13:46:02">2024-07-04</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('http://micropython.86x.net/en/latet/_images/esp32.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 二马山石</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/github.fy/js/utils.js?v=4.13.0"></script><script src="/github.fy/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script id="canvas_nest" defer="defer" color="(0,205,205)" opacity="0.7" zIndex="-1" count="99" mobile="true" src="/github.fy/%5Bobject%20Object%5D"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>